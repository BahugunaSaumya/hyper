[build]
  command = "npm run build"
  publish = ".next"

[[plugins]]
  package = "@netlify/plugin-nextjs"

[functions]
  node_bundler = "esbuild"

[[scheduled.functions]]
  name = "email_heartbeat"
  cron = "0 3,15 * * *"

[build.environment]
# Firebase WEB config keys are public by design
SECRETS_SCAN_OMIT_KEYS = "NEXT_PUBLIC_FIREBASE_API_KEY,NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,NEXT_PUBLIC_FIREBASE_PROJECT_ID,NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,NEXT_PUBLIC_FIREBASE_APP_ID,NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID,FIREBASE_PROJECT_ID"

# Omit *both* the repo copy (if any) and Next build copy
SECRETS_SCAN_OMIT_PATHS = "public/assets/admin_files/iframe.html,.next/assets/admin_files/iframe.html,.next/**/admin_files/iframe.html"
[build.environment]
SECRETS_SCAN_OMIT_KEYS = "NEXT_PUBLIC_RAZORPAY_KEY_ID,RAZORPAY_KEY_ID,RAZORPAY_KEY_SECRET"
SECRETS_SCAN_OMIT_PATHS = ".next/**"
